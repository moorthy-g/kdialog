/*** kDialog v0.0.1-pre
Simple jQuery dialog, made for drop jaws with awesome CSS & JS animations
email: moorthy.g@krds.com ***/
!function(a,b,c){"use strict";function d(b,c){this.element=b,this.isOpen=!1,this.settings=a.extend(f,c),this.init()}var e="kdialog",f={css:!0,modal:!1,actionHandlers:{},wrapperClass:null,position:["center","center"],beforeOpen:function(){},beforeClose:function(){},open:function(){},close:function(){}};d.prototype=function(){var b,d,e,f,g=!1,h=function(a){var b=["webkit","moz","MS"],d=c.createElement("p");if(""==d.style[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var e=0;e<b.length;e++)if(""==d.style[b[e]+a])return b[e]+a},i=function(){b=h("animation"),d=h("transition"),b&&(e=b+("animation"===b?"end":"End"))},j=function(){g=!1,this.settings.open()},k=function(){this.$wrapper.hide(),g=!1,this.isOpen=!1,this.settings.modal&&f.fadeOut(200),this.settings.close()},l=function(){if(this.settings.position instanceof Array){var a=this.settings.position[0],b=this.settings.position[1];a=a&&"center"==a?(c.documentElement.clientWidth-this.$wrapper.width())/2:a,b=b&&"center"==b?(c.documentElement.clientHeight-this.$wrapper.height())/2:b,this.$wrapper.css("left",a+c.body.scrollLeft),this.$wrapper.css("top",b+c.body.scrollTop)}},m=function(){var b=this,c=a(this.element);b.settings.modal&&!f&&(f=a("<div class='koverlay'></div>"),f.insertBefore(c)),c.wrap("<div class='kwrapper"+(b.settings.wrapperClass?" "+b.settings.wrapperClass:"")+"'></div>"),b.$wrapper=c.parent(),b.$wrapper.on("touchstart click","[data-action]",function(a){a.preventDefault();var c=this.getAttribute("data-action");"close"===c?o.call(b):b.settings.actionHandlers[c].call(b)}),/android [1-2\.]/i.test(navigator.userAgent.toLowerCase())&&(b.settings.css=!1)},n=function(){if(!this.isOpen&&!g){var c,d=this,h=a(d.element);g=!0,d.isOpen=!0,d.settings.beforeOpen(),d.$wrapper.show(),d.settings.position&&l.call(d),d.settings.modal&&f.fadeIn(200),d.settings.css&&e?(h.addClass("in"),c=b+"Name","none"!=h.css(c)?h.on(e,function(){h.off(e),h.removeClass("in"),j.call(d)}):(h.removeClass("in"),j.call(d))):j.call(d)}},o=function(){if(this.isOpen&&!g){var c,d=this,f=a(d.element);g=!0,d.settings.beforeClose(),d.settings.css&&e?(f.addClass("out"),c=b+"Name","none"!=f.css(c)?f.on(e,function(){f.off(e).removeClass("out"),k.call(d)}):(f.removeClass("out"),k.call(d))):k.call(d)}},p=function(){{var b=this;a(b.element)}};return i(),{init:m,open:n,close:o,destroy:p}}(),a.fn[e]=function(b){return this.each(function(){a.data(this,e)||a.data(this,e,new d(this,b))})}}(jQuery,window,document);